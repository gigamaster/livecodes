var b={title:"Untitled Project",description:"",head:`<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />`,htmlAttrs:'lang="en" class=""',tags:[],autoupdate:!0,autosave:!1,autotest:!1,delay:1500,formatOnsave:!1,mode:"full",theme:"dark",layout:"responsive",editorTheme:void 0,appLanguage:void 0,recoverUnsaved:!0,showSpacing:!1,welcome:!0,readonly:!1,allowLangChange:!0,activeEditor:void 0,languages:void 0,markup:{language:"html",content:""},style:{language:"css",content:""},script:{language:"javascript",content:""},stylesheets:[],scripts:[],cssPreset:"",imports:{},types:{},tests:{language:"typescript",content:""},tools:{enabled:"all",active:"",status:""},zoom:1,processors:[],customSettings:{},editor:void 0,fontFamily:void 0,fontSize:void 0,useTabs:!1,tabSize:2,lineNumbers:!0,wordWrap:!1,closeBrackets:!0,semicolons:!0,singleQuote:!1,trailingComma:!0,emmet:!0,enableAI:!1,editorMode:void 0,version:"35"};var $=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;");var E=(t,s=!0)=>t.replace(/\\/g,s?"\\\\":"\\").replace(/`/g,"\\`").replace(/<\/script>/g,"<\\/script>");var _=t=>(globalThis.structuredClone||(s=>JSON.parse(JSON.stringify(s,(l,a)=>a===void 0?null:a))))(t);var q=t=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let s=document.createElement("textarea");s.textContent=t,s.style.position="fixed",document.body.appendChild(s),s.select();try{return document.execCommand("copy")}catch(l){return console.warn("Copy to clipboard failed.",l),!1}finally{document.body.removeChild(s)}}return!1};var T=(t,s,l=!0)=>(l?"":" ".repeat(s))+t.split(`
`).join(`
`+" ".repeat(s));var B={APP_VERSION:"35",SDK_VERSION:"0.6.0",COMMIT_SHA:"77bc0a6",REPO_URL:"https://github.com/live-codes/livecodes",DOCS_BASE_URL:"/livecodes/docs/"};var z='<div id="embed-container" class="modal-container"><div class="modal-title" data-i18n="embed.heading">Embed Project</div><div id="embed-screen-container" class="modal-screen-container"><div class="modal-screen"><label data-i18n="embed.preview">Preview</label><div id="embed-preview-container" data-i18n="embed.previewLoading">Loading Preview...</div><form id="embed-form"></form><label for="embed-code" data-i18n="embed.code.heading">Code</label><div id="embed-code" class="custom-editor"></div><button id="embed-copy-btn" class="wide-button" data-i18n="embed.code.copy">Copy Code</button><div class="description help" data-i18n="embed.desc" data-i18n-prop="innerHTML">Please check the <a href="{{DOCS_BASE_URL}}configuration/" target="_blank" rel="noopener">documentations</a> for advanced configurations.</div></div></div></div>';var ne=t=>Object.entries(B).reduce((s,[l,a])=>s.replace(new RegExp(`{{${l}}}`,"g"),a),t);var W=ne(z);var K=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],J=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],Z=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],u={getModuleUrl:(t,{isModule:s=!0,defaultCDN:l="esm.sh"}={})=>{t=t.replace(/#nobundle/g,"");let a=V(t,s,l);return a||(s?"https://esm.sh/"+t:"https://cdn.jsdelivr.net/npm/"+t)},getUrl:(t,s)=>t.startsWith("http")||t.startsWith("data:")?t:V(t,!1,s||re())||t,cdnLists:{npm:J,module:K,gh:Z},checkCDNs:async(t,s)=>{let l=[s,...u.cdnLists.npm].filter(Boolean);for(let a of l)try{if((await fetch(u.getUrl(t,a),{method:"HEAD"})).ok)return a}catch{}return u.cdnLists.npm[0]}},re=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||u.cdnLists.npm[0]}catch{return u.cdnLists.npm[0]}},V=(t,s,l)=>{let a=s&&t.startsWith("unpkg:")?"?module":"";t.startsWith("gh:")?t=t.replace("gh",Z[0]):t.includes(":")||(t=(l||(s?K[0]:J[0]))+":"+t);for(let g of oe){let[C,L]=g;if(C.test(t))return t.replace(C,L)+a}return null},oe=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var se={esm:"livecodes.js",umd:"livecodes.umd.js",react:"react.js",vue:"vue.js",types:"index.d.ts"},Q={getAppUrl:()=>"https://v35.livecodes.io/",getSDKUrl:(t="esm")=>u.getUrl(`livecodes@0.6.0/${se[t]}`)};var ye=async({config:t,editorLanguages:s,modal:l,notifications:a,eventsManager:g,createEditorFn:C,getUrlFn:L})=>{let A=t.title,f=t.activeEditor||"markup",M=document.createElement("div");M.innerHTML=W;let w=M.firstChild;l.show(w,{isAsync:!0,onClose:()=>S?.destroy()});let R=w.querySelector("#embed-preview-container"),y=w.querySelector("#embed-form"),O=w.querySelector("#embed-code"),P=w.querySelector("#embed-copy-btn");if(!R||!y||!O||!P)return;[{title:window.deps.translateString("embed.theme.heading","Theme"),name:"theme",options:[{label:window.deps.translateString("embed.theme.dark","Dark"),value:"dark",checked:!0},{label:window.deps.translateString("embed.theme.light","Light"),value:"light"}]},{title:window.deps.translateString("embed.loading.heading","Loading"),name:"loading",options:[{label:window.deps.translateString("embed.loading.lazy","Lazy"),value:"lazy",checked:!0},{label:window.deps.translateString("embed.loading.click","On-click"),value:"click"},{label:window.deps.translateString("embed.loading.eager","Eager"),value:"eager"}]},{title:window.deps.translateString("embed.lite","Lite Mode"),name:"lite",options:[{value:"true",checked:!1}],help:"/livecodes/docs/features/lite"},{title:window.deps.translateString("embed.readonly","Read only"),name:"readonly",options:[{value:"true",checked:!1}]},{title:window.deps.translateString("embed.mode.heading","Display Mode"),name:"mode",options:[{label:window.deps.translateString("embed.mode.full","Full"),value:"full",checked:!0},{label:window.deps.translateString("embed.mode.editor","Editor"),value:"editor"},{label:window.deps.translateString("embed.mode.codeblock","Code Block"),value:"codeblock"},{label:window.deps.translateString("embed.mode.result","Result"),value:"result"}],help:"/livecodes/docs/features/display-modes"},{title:window.deps.translateString("embed.view.heading","Default View"),name:"view",options:[{label:window.deps.translateString("embed.view.split","Split"),value:"split",checked:!0},{label:window.deps.translateString("embed.view.editor","Editor"),value:"editor"},{label:window.deps.translateString("embed.view.result","Result"),value:"result"}],help:"/livecodes/docs/features/default-view"},{title:window.deps.translateString("embed.activeEditor.heading","Active Editor"),name:"activeEditor",options:[{label:window.deps.translateString("embed.activeEditor.markup","{{markup}}",{markup:s.markup}),value:"markup",checked:f==="markup"},{label:window.deps.translateString("embed.activeEditor.style","{{style}}",{style:s.style}),value:"style",checked:f==="style"},{label:window.deps.translateString("embed.activeEditor.script","{{script}}",{script:s.script}),value:"script",checked:f==="script"}]},{title:window.deps.translateString("embed.tools.heading","Tools"),name:"tools",options:[{label:window.deps.translateString("embed.tools.closed","Closed"),value:"closed",checked:!0},{label:window.deps.translateString("embed.tools.open","Open"),value:"open"},{label:window.deps.translateString("embed.tools.full","Full"),value:"full"},{label:window.deps.translateString("embed.tools.none","None"),value:"none"}],help:"/livecodes/docs/features/tools-pane"},{title:window.deps.translateString("embed.activeTool.heading","Active Tool"),name:"activeTool",options:[{label:window.deps.translateString("embed.activeTool.console","Console"),value:"console",checked:!0},{label:window.deps.translateString("embed.activeTool.compiled","Compiled"),value:"compiled"},{label:window.deps.translateString("embed.activeTool.tests","Tests"),value:"tests"}].filter(e=>!(e.value==="tests"&&!t.tests?.content)),help:"/livecodes/docs/features/tools-pane"},{title:window.deps.translateString("embed.permanentUrl","Permanent URL"),name:"permanentUrl",options:[{value:"true",checked:!0}],help:"/livecodes/docs/features/permanent-url"},{title:window.deps.translateString("embed.embedType.heading","Embed Type"),name:"type",options:[{label:window.deps.translateString("embed.embedType.cdn","Script (CDN)"),value:"cdn",checked:!0},{label:window.deps.translateString("embed.embedType.npm","JS (npm)"),value:"npm"},{label:window.deps.translateString("embed.embedType.react","React"),value:"react"},{label:window.deps.translateString("embed.embedType.vue","Vue"),value:"vue"},{label:window.deps.translateString("embed.embedType.svelte","Svelte"),value:"svelte"},{label:window.deps.translateString("embed.embedType.iframe","Iframe"),value:"iframe"},{label:window.deps.translateString("embed.embedType.html","HTML"),value:"html"}]}].forEach(e=>{let r=document.createElement("label");if(r.innerHTML=e.title,y.appendChild(r),e.help){let o=document.createElement("a");o.href=e.help,o.target="_blank",o.classList.add("help-link"),o.title=window.deps.translateString("generic.clickForInfo","Click for info..."),r.appendChild(o);let m=document.createElement("i");m.classList.add("icon-info"),o.appendChild(m)}let i=document.createElement("div");i.classList.add("input-container"),y.appendChild(i),e.options.forEach(o=>{let m=`embed-${e.name}`,c=`${m}-${o.value}`,k=!o.label&&o.value==="true",j=document.createElement("span");i.appendChild(j);let d=document.createElement("input");if(d.type=k?"checkbox":"radio",d.name=m,d.id=c,d.value=o.value,d.checked=o.checked||!1,j.appendChild(d),k)d.classList.add("switch");else{let n=document.createElement("label");n.classList.add("radio-label"),n.htmlFor=c,n.innerHTML=o.label||"",j.appendChild(n)}})});let S=await C(O),G="https://gigamaster.github.io/livecodes/",I=Q.getSDKUrl("umd"),x=await L(!0),h=new URL(x),U=h.origin+h.pathname,D=document.createElement("iframe");D.id="embed-preview-iframe",R.innerHTML="",R.appendChild(D);let X=()=>"livecodes-"+(Math.random()+1).toString(36).substring(2),v=e=>{let r={...e.mode!==b.mode?{mode:e.mode}:{},...e.theme!==b.theme?{theme:e.theme}:{},...e.tools!=="closed"||e.activeTool!=="console"?{tools:{enabled:e.tools==="none"?[]:"all",status:e.tools,active:e.activeTool}}:{},...e.readonly?{readonly:e.readonly}:{},...e.mode!=="result"&&e.activeEditor!==f?{activeEditor:e.activeEditor}:{}},i=h.searchParams.get("x");return{...U!=="https://livecodes.io/"?{appUrl:U}:{},...Object.keys(r).length>0?{config:r}:{},...i?{import:i}:{},...e.lite?{lite:e.lite}:{},...e.loading!=="lazy"?{loading:e.loading}:{},...e.view&&e.view!=="split"?{view:e.view}:{}}},H=e=>{let r=new URL(x);return r.searchParams.set(e.lite?"lite":"embed","true"),e.loading&&e.loading!=="lazy"&&r.searchParams.set("loading",String(e.loading)),e.view&&e.view!=="split"&&r.searchParams.set("view",String(e.view)),e.mode!=="result"&&e.activeEditor&&e.activeEditor!==f&&r.searchParams.set("activeEditor",String(e.activeEditor)),e.mode&&e.mode!==b.mode&&r.searchParams.set("mode",String(e.mode)),e.theme&&e.theme!==b.theme&&r.searchParams.set("theme",String(e.theme)),e.tools&&(e.tools!=="closed"||e.activeTool!=="console")&&r.searchParams.set(e.tools==="none"?"tools":String(e.activeTool),String(e.tools)),e.readonly!==void 0&&r.searchParams.set("readonly",String(e.readonly)),decodeURIComponent(r.href)},Y={cdn:e=>{let r=X(),i=`<div id="${r}"></div>`,o=v(e),m=JSON.stringify(o,null,2),c=T(m,2);return`
${i}
<script src="${I}"><\/script>
<script>
  const options = ${c};
  livecodes.createPlayground("#${r}", options);
<\/script>
`.trimStart()},npm(e){let r=v(e);return`
import { createPlayground } from "livecodes";
const options = ${JSON.stringify(r,null,2)};
createPlayground("#container", options);
`.trimStart()},react(e){let r=v(e),i=JSON.stringify(r,null,2);return`
import LiveCodes from "livecodes/react";
export default function App() {
  const options = ${T(i,2)};
  return <LiveCodes {...options}></LiveCodes>;
}
`.trimStart()},vue(e){let r=v(e),i=JSON.stringify(r,null,2);return`
<script setup>
  import LiveCodes from 'livecodes/vue';
  const options = ${T(i,2)};
<\/script>

<template>
  <LiveCodes v-bind="options" />
</template>
`.trimStart()},svelte(e){let r=v(e),i=JSON.stringify(r,null,2);return`
<script>
  import { onMount } from 'svelte';
  import { createPlayground } from 'livecodes';
  const options = ${T(i,2)};
  let container;
  let playground;
  onMount(() => {
    createPlayground(container, options).then((p) => (playground = p));
    return () => playground?.destroy();
  });
<\/script>

<div bind:this="{container}"></div>
`.trimStart()},iframe:e=>{let r=H(e),i=new URL(r);i.searchParams.delete("embed"),i.searchParams.delete("lite");let o=decodeURIComponent(i.href);return`
<iframe title="${A}" scrolling="no" loading="lazy" style="height:300px; width: 100%; border:1px solid black; border-radius:5px;" src="${r}">
  See the project <a href="${o}" target="_blank">${A}</a> on <a href="${G}" target="_blank">LiveCodes</a>.
</iframe>
`.trimStart()},html:e=>{let{import:r,...i}=v(e),o={..._(t),...i.config};return Object.keys(o).forEach(c=>{(JSON.stringify(o[c])===JSON.stringify(b[c])||c==="activeEditor"&&o.activeEditor==="markup"||["markup","style","script"].includes(c))&&delete o[c]}),Object.keys(o).length>0&&(i.config=o),`
<div class="livecodes" style="height: 300px;" data-options='${E(JSON.stringify(i).replace(/'/g,"&#39;"))}'>
<pre data-lang="${t.markup.language}">${E($(t.markup.content||""))}</pre>
<pre data-lang="${t.style.language}">${E($(t.style.content||""))}</pre>
<pre data-lang="${t.script.language}">${E($(t.script.content||""))}</pre>
</div>
<script defer src="${I}" data-prefill><\/script>
`.trimStart()}},p={view:"split",tools:"closed",activeTool:"console"},F=async()=>{let e=Array.from(new FormData(y)).reduce((n,[ee,N])=>({...n,[ee.replace("embed-","")]:N==="true"?!0:N}),{});x=await L(!!e.permanentUrl),h=new URL(x),U=h.origin+h.pathname;let r=document.querySelectorAll('input[name="embed-view"]');e.mode!=="full"?(p.view=e.view||p.view,delete e.view,r.forEach(n=>{n.checked=!1,n.disabled=!0})):r.forEach(n=>{n.value===(e.view||p.view)&&(n.checked=!0),n.disabled=!1,n.checked&&(e.view=n.value)});let i=document.querySelectorAll('input[name="embed-tools"]'),o=document.querySelectorAll('input[name="embed-activeTool"]');e.lite?(p.tools=e.tools||p.tools,delete e.tools,i.forEach(n=>{n.checked=!1,n.disabled=!0})):i.forEach(n=>{n.value===(e.tools||p.tools)&&(n.checked=!0),n.disabled=!1,n.checked&&(e.tools=n.value)}),e.lite||e.tools==="none"?(p.activeTool=e.activeTool||p.activeTool,delete e.activeTool,o.forEach(n=>{n.checked=!1,n.disabled=!0})):o.forEach(n=>{n.value===(e.activeTool||p.activeTool)&&(n.checked=!0),n.disabled=!1,n.checked&&(e.activeTool=n.value)}),document.querySelectorAll('input[name="embed-activeEditor"]').forEach(n=>{e.mode==="result"?(n.checked=n.value===f,n.disabled=!0,delete e.activeEditor):n.disabled=!1}),D.src=H(e);let c=e.type,k=Y[c]?.(e),d={npm:"javascript",react:"jsx"}[c]||"html";S.getLanguage()!==d?S.setLanguage(d,k):S.setValue(k)};g.addEventListener(y,"change",F),g.addEventListener(P,"click",async()=>{q(S.getValue())?a.success(window.deps.translateString("core.copy.copied","Code copied to clipboard")):a.error(window.deps.translateString("core.error.failedToCopyCode","Failed to copy code"))}),F()};export{ye as createEmbedUI};
